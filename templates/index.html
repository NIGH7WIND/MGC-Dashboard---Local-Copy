{% extends 'base.html' %}

{% block title %}FinBERT Dashboard{% endblock %}

{% block content %}
    <h1><i class="fa-solid fa-magnifying-glass-chart"></i> MGC Dashboard</h1>
    <div class="search-bar">
        <input type="text" id="company-name" placeholder="Enter Company Name">
        <select id="time-period" title="Time Period">
            <option value="184d">6 months</option>
            <option value="365d">1 year</option>
            <option value="720d">2 years</option>
            <option value="1095d">3 years</option>
        </select>
        <button class="analyze-btn" onclick="analyzeSentiment()"><i class="fas fa-chart-pie"></i> Analyze Sentiment</button>
    </div>
    <div class="company-info">
        <div id='today-date' class="company-name">Today</div>
        <div class="company-info-flex">
            <div id="company-name-display" class="companyname">Company Name</div>
            <button class="generate-btn" onclick="generateReport()" disabled style="display: none;">Generate Report</button>
        </div>
    </div>
    <div class="dashboard-footer">
        <div class="sentiment-chart">
            <h2>Historical Sentiment Scores <span id="date-range" class="date-range">Date Range</span></h2>
            <div id="chart-display" class="chart">
                <!-- Loading Animation -->
                <div id="loading" class="loading" style="display: none;">
                    <div class="loader-container">
                        <div id="loaderIcon" class="loader-icon pulse-2">ðŸ”—</div>
                        <div class="loader-text">
                            <h3 id="stageText">Scraping Links</h3>
                            <p id="stageDescription">Collecting web resources...</p>
                        </div>
                        <div class="progress-container">
                            <div class="progress-label">
                                <span>Overall Progress</span>
                                <span id="overallProgressText">0%</span>
                            </div>
                            <div class="progress-bar">
                                <div id="overallProgressBar" class="progress-bar-fill"></div>
                            </div>
                            <div class="progress-label" style="margin-top: 15px;">
                                <span>Current Stage Progress</span>
                                <span id="stageProgressText">0%</span>
                            </div>
                            <div class="progress-bar stage-progress-bar">
                                <div id="stageProgressBar" class="stage-progress-bar-fill"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Chart will be inserted here by JavaScript -->
            </div>
        </div>
        <div class="overview-container">
            <div class="sentiment-score">
                <h3>Overall Sentiment Score</h3>
                <div class="score-circle">
                    <div id="pie-chart" class="pie-chart">
                        <div id="gauge-loading" class="loading" style="display: none;">
                            <div class="spinner"></div>
                            <p>Loading...</p>
                        </div>
                        <!-- Chart will be inserted here by JavaScript -->
                    </div>
                </div>
            </div>
            <div class="metrics">
                <div class="metric-card">
                    <h4>Best Score</h4>
                    <div class="metric-row">
                        <div id="Best_score" class="value">--%</div>
                        <div id="Best_score_date" class="date">YYYY-MM-DD</div>
                    </div>                            
                </div>
                <div class="metric-card">
                    <h4>Worst Score</h4>
                    <div class="metric-row">
                        <div id="Worst_score" class="value">--%</div>
                        <div id="Worst_score_date" class="date-bad">YYYY-MM-DD</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="articles">
        <div id="positive_links" class="positive-articles">
            <h3>Positive Articles</h3>
        </div>
        <div id="negative_links" class="negative-articles">
            <h3>Negative Articles</h3>
        </div>
    </div>
{% endblock %}
